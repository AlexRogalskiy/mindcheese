<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="browser.js"></script>
    <link href="../styles.css" rel="stylesheet" />
    <title>Demo site of the MindCheese</title>
  </head>
  <body>
    <div id="menu">
      <button id="layout">layout.layout()</button>
      <button id="viewShow">view.show()</button>
      <button id="expandSize">view.expand_size()</button>
      <button id="view_show">view._show()</button>
      <button id="dump_to_console">dump_to_console()</button>
      <button id="dump_to_console_markdown">dump_to_console_markdown()</button>
      <button id="load_markdown">load_markdown()</button>
      <button id="resize">resize()</button>
    </div>
    <div id="container"></div>

    <script>
      const container = document.getElementById("container");
      const jsmind = new window.MindCheese(1, container);
      jsmind.showNodeTree({
        meta: {
          name: "jsMind remote",
          author: "hizzgdev@163.com",
          version: "0.2",
        },
        format: "node_tree",
        data: {
          id: "root",
          topic: "jsMind",
          children: [
            {
              id: "easy",
              topic: "Easy",
              direction: "left",
              children: [
                { id: "easy1", topic: "Easy to show" },
                { id: "easy2", topic: "Easy to edit" },
                { id: "easy3", topic: "Easy to store" },
                { id: "easy4", topic: "Easy to embed" },
              ],
            },
            {
              id: "open",
              topic: "Open Source",
              direction: "right",
              children: [
                { id: "open1", topic: "on GitHub" },
                { id: "open2", topic: "BSD License" },
              ],
            },
            {
              id: "powerful",
              topic: "Powerful",
              direction: "right",
              children: [
                { id: "powerful1", topic: "Base on Javascript" },
                { id: "powerful2", topic: "Base on HTML5" },
                { id: "powerful3", topic: "Depends on you" },
              ],
            },
            {
              id: "other",
              topic: "test node",
              direction: "left",
              children: [
                { id: "other1", topic: "I'm from local variable" },
                { id: "other2", topic: "I can do everything" },
              ],
            },
          ],
        },
      });

      window.addEventListener("resize", () => resize());
      resize();
      function resize() {
        const container = document.getElementById("container");
        const menu = document.getElementById("menu");
        const browserHeight = document.documentElement.clientHeight;
        const bodyMarginTop = parseInt(
          getComputedStyle(document.body).marginTop
        );
        const bodyMarginBottom = parseInt(
          getComputedStyle(document.body).marginTop
        );
        container.style.height =
          browserHeight -
          menu.clientHeight -
          bodyMarginTop -
          bodyMarginBottom +
          "px";
      }

      document.getElementById("layout").addEventListener("click", () => {
        console.log("layout.layout");
        jsmind.layout.layout();
        return false;
      });
      document.getElementById("viewShow").addEventListener("click", () => {
        console.log("viewShow");
        jsmind.view.show();
        return false;
      });
      document.getElementById("expandSize").addEventListener("click", () => {
        console.log("viewShow");
        jsmind.view.expandSize();
        return false;
      });
      document.getElementById("view_show").addEventListener("click", () => {
        console.log("view_show");
        jsmind.view._show();
        return false;
      });
      document
        .getElementById("dump_to_console")
        .addEventListener("click", () => {
          const data = jsmind.getNodeTree();
          console.log(data);
          return false;
        });
      document
        .getElementById("dump_to_console_markdown")
        .addEventListener("click", () => {
          const data = jsmind.getMarkdown();
          console.log(data);
          return false;
        });
      document.getElementById("resize").addEventListener("click", () => {
        jsmind.resize();
        resize();
        return false;
      });
      document.getElementById("load_markdown").addEventListener("click", () => {
        jsmind.showMarkdown(
          "マークダウンのテスト",
          `
- a1
  - b1
      - dddddddddddddddddddd1
        - eeeeeeeeeeeeeeeeeeeeee2
          - ffffffffffffffffffffff3
            - gggggggggggggggggggggggggg3
              - hhhhhhhhhhhhhhhhhhhhhh2
                - iiiiiiiiiiiiii52iiiiiiiiiii
                  - jjjjjjjjjjjjjj25jjjjjjjjjjjj
                    - kkkkkkkkk2342kkkkkkkkkkkkkkkkk2
                      - lllllllllll52llllllllllllllllllll
  - b2
  - b3
    - c1
    - c2
      - dddddddddddddddddddd
        - eeeeeeeeeeeeeeeeeeeeee
          - ffffffffffffffffffffff
            - gggggggggggggggggggggggggg
              - hhhhhhhhhhhhhhhhhhhhhh
                - iiiiiiiiiiiiiiiiiiiiiiiii
                  - jjjjjjjjjjjjjjjjjjjjjjjjjj
                    - kkkkkkkkkkkkkkkkkkkkkkkkkk
                      - lllllllllllllllllllllllllllllll
+ a2 \\
  複数行だよ
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
+ aaa
          `
        );
        resize();
        return false;
      });
    </script>
  </body>
</html>
